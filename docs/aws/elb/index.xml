<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ELB on 湯姆隨手記</title>
    <link>http://localhost:1313/docs/aws/elb/</link>
    <description>Recent content in ELB on 湯姆隨手記</description>
    <generator>Hugo</generator>
    <language>en-US</language>
    <lastBuildDate>Tue, 22 Jul 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/docs/aws/elb/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Application Load Balancer 設定</title>
      <link>http://localhost:1313/docs/aws/elb/application-load-balancer/</link>
      <pubDate>Tue, 22 Jul 2025 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/aws/elb/application-load-balancer/</guid>
      <description>&lt;h1 id=&#34;application-load-balancer-alb-設定&#34;&gt;Application Load Balancer (ALB) 設定&lt;/h1&gt;&#xA;&lt;h2 id=&#34;什麼是-alb&#34;&gt;什麼是 ALB？&lt;/h2&gt;&#xA;&lt;p&gt;Application Load Balancer 工作在 OSI 第 7 層 (應用層)，可以根據 HTTP/HTTPS 請求內容進行路由。&lt;/p&gt;&#xA;&lt;h2 id=&#34;主要功能&#34;&gt;主要功能&lt;/h2&gt;&#xA;&lt;h3 id=&#34;路徑基礎路由&#34;&gt;路徑基礎路由&lt;/h3&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;example.com/api/* → API 伺服器群組&#xA;example.com/web/* → Web 伺服器群組&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;host-基礎路由&#34;&gt;Host 基礎路由&lt;/h3&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;api.example.com → API 伺服器群組&#xA;www.example.com → Web 伺服器群組&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;設定步驟&#34;&gt;設定步驟&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1-建立目標群組-target-group&#34;&gt;1. 建立目標群組 (Target Group)&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 透過 AWS CLI 建立目標群組&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;aws elbv2 create-target-group &lt;span class=&#34;se&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --name my-app-targets &lt;span class=&#34;se&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --protocol HTTP &lt;span class=&#34;se&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --port &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --vpc-id vpc-12345678&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-註冊目標實例&#34;&gt;2. 註冊目標實例&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 將 EC2 實例註冊到目標群組&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;aws elbv2 register-targets &lt;span class=&#34;se&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --target-group-arn arn:aws:elasticloadbalancing:region:account:targetgroup/my-app-targets &lt;span class=&#34;se&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --targets &lt;span class=&#34;nv&#34;&gt;Id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;i-1234567890abcdef0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;3-建立-load-balancer&#34;&gt;3. 建立 Load Balancer&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;選擇子網路 (至少兩個 AZ)&lt;/li&gt;&#xA;&lt;li&gt;配置安全群組&lt;/li&gt;&#xA;&lt;li&gt;設定監聽器規則&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;健康檢查設定&#34;&gt;健康檢查設定&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;健康檢查路徑: /health&#xA;檢查間隔: 30 秒&#xA;逾時時間: 5 秒&#xA;健康閾值: 2&#xA;不健康閾值: 5&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;最佳實務&#34;&gt;最佳實務&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;多 AZ 部署&lt;/strong&gt; - 至少兩個可用區域&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;適當的健康檢查&lt;/strong&gt; - 確保檢查端點能反映應用狀態&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;SSL 終止&lt;/strong&gt; - 在 ALB 層級處理 SSL&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;監控設定&lt;/strong&gt; - 啟用 CloudWatch 指標&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>Network Load Balancer 設定</title>
      <link>http://localhost:1313/docs/aws/elb/network-load-balancer/</link>
      <pubDate>Tue, 22 Jul 2025 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/aws/elb/network-load-balancer/</guid>
      <description>&lt;h1 id=&#34;network-load-balancer-nlb-設定&#34;&gt;Network Load Balancer (NLB) 設定&lt;/h1&gt;&#xA;&lt;h2 id=&#34;什麼是-nlb&#34;&gt;什麼是 NLB？&lt;/h2&gt;&#xA;&lt;p&gt;Network Load Balancer 工作在 OSI 第 4 層 (傳輸層)，提供極高效能的 TCP/UDP 流量分發。&lt;/p&gt;&#xA;&lt;h2 id=&#34;主要特色&#34;&gt;主要特色&lt;/h2&gt;&#xA;&lt;h3 id=&#34;超高效能&#34;&gt;超高效能&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;每秒處理數百萬請求&lt;/li&gt;&#xA;&lt;li&gt;極低延遲&lt;/li&gt;&#xA;&lt;li&gt;靜態 IP 支援&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;協定支援&#34;&gt;協定支援&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;TCP&lt;/li&gt;&#xA;&lt;li&gt;UDP&lt;/li&gt;&#xA;&lt;li&gt;TLS&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;適用場景&#34;&gt;適用場景&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;高效能需求&lt;/strong&gt; - 需要極低延遲的應用&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;靜態 IP&lt;/strong&gt; - 需要固定 IP 位址的場景&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;非 HTTP 協定&lt;/strong&gt; - TCP/UDP 應用程式&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;極大流量&lt;/strong&gt; - 每秒數百萬連線&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;設定注意事項&#34;&gt;設定注意事項&lt;/h2&gt;&#xA;&lt;h3 id=&#34;健康檢查&#34;&gt;健康檢查&lt;/h3&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;TCP 健康檢查: 檢查 TCP 連線是否成功&#xA;HTTP 健康檢查: 可選，提供更詳細的健康狀態&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;目標類型&#34;&gt;目標類型&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;實例&lt;/strong&gt; - EC2 實例&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;IP&lt;/strong&gt; - 特定 IP 地址 (可跨 VPC)&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Lambda&lt;/strong&gt; - Lambda 函數&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;與-alb-的比較&#34;&gt;與 ALB 的比較&lt;/h2&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;功能&lt;/th&gt;&#xA;          &lt;th&gt;NLB&lt;/th&gt;&#xA;          &lt;th&gt;ALB&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;OSI 層級&lt;/td&gt;&#xA;          &lt;td&gt;Layer 4&lt;/td&gt;&#xA;          &lt;td&gt;Layer 7&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;協定&lt;/td&gt;&#xA;          &lt;td&gt;TCP/UDP/TLS&lt;/td&gt;&#xA;          &lt;td&gt;HTTP/HTTPS&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;效能&lt;/td&gt;&#xA;          &lt;td&gt;極高&lt;/td&gt;&#xA;          &lt;td&gt;高&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;路由能力&lt;/td&gt;&#xA;          &lt;td&gt;基礎&lt;/td&gt;&#xA;          &lt;td&gt;進階&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;成本&lt;/td&gt;&#xA;          &lt;td&gt;較低&lt;/td&gt;&#xA;          &lt;td&gt;較高&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h2 id=&#34;最佳實務&#34;&gt;最佳實務&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;選擇合適的目標類型&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;配置適當的健康檢查&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;考慮跨區域負載平衡&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;監控連線指標&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
  </channel>
</rss>
